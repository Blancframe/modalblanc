!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.Modalblanc=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function typeOfAnimation(type,typeClass){var animationTypes={slide:["slide-next","slide-back"],scale:["scale-next","scale-back"]},animationClass=animationTypes[type];return void 0===type?2===typeClass?animationTypes.slide[1]:animationTypes.slide[0]:2===typeClass?animationClass[1]:animationClass[0]}function transitionPrefix(elm){var transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var name in transEndEventNames)if(void 0!==elm.style[name])return{end:transEndEventNames[name]}}function setEvents(){var nextButton=document.getElementById("modal-button-next"),prevButton=document.getElementById("modal-button-prev"),closed=document.getElementsByClassName("modal-fullscreen-close"),_this=this;this.classEventListener(closed,function(){_this.close()}),keyboardActions.call(this),null!==this.options.sideTwo.content&&(nextButton.addEventListener("click",this._contentNext.bind(this)),prevButton.addEventListener("click",this._contentPrevious.bind(this)))}function build(){this.modalContainer=document.getElementsByClassName("modal-fullscreen-container"),this.options.closeButton&&(this.closeButton='<span class="modal-fullscreen-close"></span>');var modalId,contentSideOne=contentType(this.options.slider?'<div id="modal-slider"></div>':this.options.content),typeModal=this.options.slider?"slider-modal":"big-modal",modalTemplate=Template('<div id="overlay-modal-blanc" class="modal-fullscreen-background <%this.animation%> <%this.state%>"><div id="modal-fullscreen-container"class="modal-fullscreen-container <%this.type%> "><div id="card"><div class="front"><div id="front-card" class="modal-fullscreen-item"><%this.closeButton%><%this.contentTypeSideOne%></div></div><div class="back"><div  id="back-card" class="modal-fullscreen-item"><%this.closeButton%><%this.contentTypeSideTwo%></div></div></div></div></div>',{animation:this.options.animation,state:"is-active",type:typeModal,closeButton:this.closeButton,contentTypeSideOne:contentSideOne,contentTypeSideTwo:contentType(this.options.sideTwo.content)}),body=document.getElementsByTagName("body");body[0].id?modalId=body[0].id:(modalId="go-modal",body[0].id=modalId),StringAsNode(document.getElementById(modalId),modalTemplate),this.settings.modalOpen=!0,disableScroll(modalId),this.options.slider&&this.sliderInit("#modal-slider"),null!==this.options.sideTwo.content&&(buildButton(this.options.sideTwo.button),buildButton(this.options.sideTwo.buttonBack))}function buildElement(buildOptions){var createElm,parentElm;createElm=document.createElement(buildOptions.elm),createElm.id=buildOptions.buttonId,createElm.innerHTML=buildOptions.buttonText,parentElm=document.getElementById(buildOptions.parentId),parentElm.appendChild(createElm)}function buildButton(elm){if(null===elm||void 0===elm){if(document.getElementById("modal-button-next")||document.getElementById("modal-button-prev"))return;buildElement({elm:"a",buttonId:"modal-button-next",buttonText:"Next step",parentId:"front-card"}),buildElement({elm:"a",buttonId:"modal-button-prev",buttonText:"Previous step",parentId:"back-card"})}else buildElement({elm:elm.element,buttonId:elm.id,buttonText:elm.text,parentId:elm.parent})}function contentType(contentValue){return"string"==typeof contentValue?contentValue:null===contentValue?"":contentValue.innerHTML}function addClass(selector,className){selector[0].classList.add(className)}function removeClass(selector,className){selector[0].classList.remove(className)}function keyboardActions(){var _this=this;document.onkeyup=function(e){e.preventDefault(),_this.settings.modalOpen&&27==e.keyCode&&_this.close()}}function disableScroll(id){var $body=document.getElementById(id),windowWidth=window.innerWidth;$body.style.width=windowWidth,$body.classList.add("is-stopped-scrolling")}function enableScroll(){var bodyId=document.getElementsByTagName("body"),id=bodyId[0].id,$body=document.getElementById(id);$body.style.width="",$body.classList.remove("is-stopped-scrolling")}var ExtendDefault=require("./lib/extend_default"),ImageSlider=require("./lib/image_slider"),StringAsNode=require("./lib/string_as_node"),Template=require("./lib/template-engine"),Modalblanc=function(){if(!(this instanceof Modalblanc))return new Modalblanc;this.closeButton=null,this.overlay=null;var defaults={animation:"fade-in-out",closeButton:!0,content:"",slider:null,autoPlaySlider:!1,sideTwo:{content:null,animation:null,button:null,buttonBack:null}};this.settings={},this.hasSlider=!!this.hasSlider,this.sliderIsOpen=!1,arguments[0]&&"object"==typeof arguments[0]&&(this.options=ExtendDefault(defaults,arguments[0]))};Modalblanc.prototype.open=function(){this.settings.modalOpen||(build.call(this),setEvents.call(this))},Modalblanc.prototype.close=function(){if(this.settings.modalOpen){var overlay=document.getElementById("overlay-modal-blanc"),_this=this;overlay.classList.remove("is-active"),overlay.classList.add("is-inactive");var transPrefix=transitionPrefix(overlay);overlay.addEventListener(transPrefix.end,function(){this.remove(),_this.settings.modalOpen=!1,enableScroll()},!1),document.onkeyup=null,document.onkeydown=null}},Modalblanc.prototype.sliderInit=function(side){null!==this.options.slider&&(this.hasSlider=!0),this.hasSlider&&(this.open(),this.sliderIsOpen=!0,this.slider=new ImageSlider({parent:side,selector:this.options.slider,autoPlay:this.options.autoPlaySlider}))},Modalblanc.prototype._contentNext=function(){this.hasSlider&&(this.sliderIsOpen=!1,this.slider.playing&&this.slider.pause(),removeClass(this.modalContainer,"slider-modal"),addClass(this.modalContainer,"big-modal"));var card=document.getElementById("card"),customClass=this.options.sideTwo.animation;card.classList.remove(typeOfAnimation(customClass,2)),card.classList.add(typeOfAnimation(customClass))},Modalblanc.prototype._contentPrevious=function(){this.hasSlider&&(removeClass(this.modalContainer,"big-modal"),addClass(this.modalContainer,"slider-modal"));var card=document.getElementById("card"),customClass=this.options.sideTwo.animation;card.classList.remove(typeOfAnimation(customClass)),card.classList.add(typeOfAnimation(customClass,2))},Modalblanc.prototype.classEventListener=function(elm,callback){for(var i=0;i<elm.length;i++)elm[i].addEventListener("click",function(){callback()})},module.exports=Modalblanc},{"./lib/extend_default":2,"./lib/image_slider":3,"./lib/string_as_node":4,"./lib/template-engine":5}],2:[function(require,module,exports){"use strict";module.exports=function(source,properties){var property;for(property in properties)properties.hasOwnProperty(property)&&(source[property]=properties[property]);return source}},{}],3:[function(require,module,exports){"use strict";function setEvents(){var playButton=document.getElementById("play-btn"),previousButton=document.getElementById("previous-btn"),nextButton=document.getElementById("next-btn"),_this=this;playButton.onclick=function(){_this.playing?_this.pause():_this.play()},previousButton.onclick=function(){_this.pause(),_this.previousSlide()},nextButton.onclick=function(){_this.pause(),_this.nextSlide()},keyboardActions.call(this)}function keyboardActions(){var _this=this;document.onkeydown=function(e){e.preventDefault(),37==e.keyCode?_this.previousSlide():39==e.keyCode&&_this.nextSlide()}}var ExtendDefault=require("./extend_default"),ImageSlider=function(){if(!(this instanceof ImageSlider))return new ImageSlider;var defaults={selector:".slides",transition:"fade-slide",autoPlay:!1};arguments[0]&&"object"==typeof arguments[0]&&(this.options=ExtendDefault(defaults,arguments[0]));this.currentSlide=0,this.playing,this._init(),this.slider=document.querySelectorAll(".image-slider-holder .image-slider"),this.setSlide(),this.options.autoPlay&&this.play()};ImageSlider.prototype._init=function(){this.createSlides(),setEvents.call(this)},ImageSlider.prototype.createSlides=function(){this.slides=[];var slides,images=this.options.selector;slides=images instanceof Array?images:document.querySelectorAll(this.options.selector+" img");var slideImg,sliderElm,imgElm,parentEl=document.querySelector(this.options.parent),container=document.createElement("div"),slider=document.createElement("ul");container.className="image-slider-container",slider.className="image-slider-holder";for(var i=0;i<slides.length;i++)slideImg=slides[i].src?slides[i].src:slides[i],this.slides.push({index:i,el:slides[i],images:slideImg}),sliderElm=document.createElement("li"),sliderElm.className="image-slider",imgElm=document.createElement("img"),imgElm.src=slideImg,sliderElm.appendChild(imgElm),slider.appendChild(sliderElm),container.appendChild(slider),parentEl.appendChild(container);this.playBtn=document.createElement("span"),this.playBtn.id="play-btn",slider.appendChild(this.playBtn),this.previousBtn=document.createElement("span"),this.previousBtn.id="previous-btn",slider.appendChild(this.previousBtn),this.nextBtn=document.createElement("span"),this.nextBtn.id="next-btn",slider.appendChild(this.nextBtn)},ImageSlider.prototype.setSlide=function(){this.slider[0].classList.add("is-showing")},ImageSlider.prototype.nextSlide=function(){this.goToSlide(this.currentSlide+1,"next")},ImageSlider.prototype.previousSlide=function(){this.goToSlide(this.currentSlide-1,"previous")},ImageSlider.prototype.goToSlide=function(n,side){var slides=this.slider;slides[this.currentSlide].className=side+" image-slider",this.currentSlide=(n+slides.length)%slides.length,slides[this.currentSlide].className=side+" image-slider is-showing",this.prevSlide="previous"===side?(this.currentSlide+1)%slides.length:(this.currentSlide-1)%slides.length,"previous"===side?this.currentSlide===slides.length?slides[slides.length+1].className=side+" image-slider is-hiding":slides[this.prevSlide].className=side+" image-slider is-hiding":0===this.currentSlide?slides[slides.length-1].className=side+" image-slider is-hiding":slides[this.prevSlide].className=side+" image-slider is-hiding"},ImageSlider.prototype.pause=function(){this.playBtn.classList.remove("is-pause"),this.playing=!1,clearInterval(this.slideInterval)},ImageSlider.prototype.play=function(){var _this=this;this.playBtn.classList.add("is-pause"),this.playing=!0,this.slideInterval=setInterval(function(){_this.nextSlide()},2e3)},module.exports=ImageSlider},{"./extend_default":2}],4:[function(require,module,exports){"use strict";module.exports=function(element,html){if(null!==html){var child,frag=document.createDocumentFragment(),tmp=document.createElement("body");for(tmp.innerHTML=html;child=tmp.firstChild;)frag.appendChild(child);element.appendChild(frag),frag=tmp=null}}},{}],5:[function(require,module,exports){"use strict";module.exports=function(html,options){for(var match,result,re=/<%(.+?)%>/g,reExp=/(^( )?(var|if|for|else|switch|case|break|{|}|;))(.*)?/g,code="with(obj) { var r=[];\n",cursor=0,add=function(line,js){return code+=js?line.match(reExp)?line+"\n":"r.push("+line+");\n":""!=line?'r.push("'+line.replace(/"/g,'\\"')+'");\n':"",add};match=re.exec(html);)add(html.slice(cursor,match.index))(match[1],!0),cursor=match.index+match[0].length;add(html.substr(cursor,html.length-cursor)),code=(code+'return r.join(""); }').replace(/[\r\t\n]/g,"");try{result=new Function("obj",code).apply(options,[options])}catch(err){console.error("'"+err.message+"'"," in \n\nCode:\n",code,"\n")}return result}},{}]},{},[1])(1)});
